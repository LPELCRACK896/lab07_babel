const myBookChapters ={
            root:{
                numero_de_cap: "1", 
                titulo:"Un frio inicio de jornada",
                progreso:"33%",
                anterior: "root",
                parrafos:["Hace unas semanas que acabó la época de fiestas, cada día eran menos la decoración en las calles y callejones, los almacenes navideños cerraron sus puertas y el espíritu navideño que una vez dominó el pueblo, desapareció; retornando a su anual descanso del cual despierta únicamente después de once meses al alzarse el primer villancico en al centro del pueblo.", 
                "Lo festejasen o no, era innegable que diciembre despertaba una calidez al pueblo que radiaba en el espíritu de cada uno. De manera que el eterno invierno que se arraigó el pueblo 10 años atrás se sentía justificada con el furor de la época. No obstante, una vez la calidez de las fiestas desapareció, no hubo que reconfortara el espíritu del pueblo; el frío desolador invadía cuerpo y alma, para finalmente agotar las energías que se necesitan para comenzar de nuevo los quehaceres de la fábrica, hogar y escuela, típicos del inicio de año.", 
                "En la madrugada del segundo lunes de enero, mis responsabilidades tocaban la puerta de mi habitación. Mi madre, que debía llegar al Teatro Mercurio a las cinco de la madrugada, me levantaba justo antes de irse. Abrió la puerta gentilmente, dejando escapar gran parte del calor que me acogía y cediendo espacio al aire húmedo y frío del exterior. Aún en la oscuridad, le veo tantear el camino hasta mi cama entre la ropa sucia del día anterior hasta que se sienta al borde de mi cama con gentileza.", 
                "—¿Vas al Teatro? —le preguntó antes de que pudiera decir algo. Me mira con la ternura que tiene una madre primeriza que ve su recién nacido en brazos y dice—Aún recuerdo tú primer día de clases; emocionado por hacer amigos, por aprender cosas en la escuela, por jugar con tus nuevos amigos en el receso; todo era esperanza en tu mirada fija en tu futuro en la escuela—toma un largo respiro y redirige la mirada hacia arriba mientras una tímida lágrima pasa sobre su mejilla y retoma su discurso—y ahora… eres todo un joven; alto y fuerte—(creo que exagera en esto último)—en tu último año en la escuela. Pronto te graduaras y podrás dejar finalmente este pueblo maldito.", 
                "Le miro con tristeza resoplando el aire frío que ya ha llenado la habitación. Me corresponde la mirada con un beso en la frente que es también una despedida hasta su vuelta por la noche.", 
                "...",
                "El camino hasta la escuela era bastante largo y complicado por la nieve que convertía una caminata de veinticinco en una de cuarenta, forzando a mi travesía hasta mi primer día de clase a comenzar prematuramente desde las 5:30am. Me cambio lo más rápido posible para pasar el menor tiempo posible sin ropa, tomó un cuaderno para tomar notas y tomo mi fiel mochila. Mi hermanito, de solo 8 años iniciaba clases ese mismo día y debía, por órdenes de mi madre, despertarlo. Abro la puerta de su habitación solo lo suficiente para verle con la luz proveniente del pasillo; duerme profundamente entre unas acolchadas sabanas que yo solía usar. Me apena bastante sacarlo de su sueño y llevarlo a un desganado comienzo de clases."
                ],
                opciones: [  
                    {
                        "name": "Despertar hermano",
                        "codigo_capitulo": "i"    
                    },
                    {
                        "name": "Dejarle quedarse en casa un dia más",
                        "codigo_capitulo": "d"    

                    } 
                ]
            },
            i:{
                numero_de_cap: "2", 
                titulo:"Primer día de clases",
                progreso:"67%",
                anterior: "root",
                parrafos:[
                "Aunque quisiera dejarle descansar un día más, no hay nadie en casa para cuidarle, así que no hay elección, en realidad. Irremediablemente intento despertarlo amablemente sacudiéndolo por los hombros, pero sin señal de desprenderse de los brazos de Morfeo, me decido por tomarlo con los míos y llevarlo hasta el comedor. Han suele ser emocionarse con el primer día de clases, pero los cuatro grados disminuidos desde la semana pasada lo ha tenido con muy pocas energías para si quiera salir a jugar, y aunque parezca ser muy desconcertante el no verlo jugar, lo cierto es que ha sido de los más afortunados en todo el pueblo. Solo la semana pasada tres de sus compañeros fueron internados en el Sanatorio Jeremías por Rinofarangitis. Entre ellos, uno de los mejores amigos de Han, con lo que mi hermano se quedó sin ganas de querer salir a jugar sin él. Aunque frente a él y frente a toda mi madre lamenta lo del amigo de Han, por dentro se alegra que ya no tenga ganas de salir innecesariamente; siempre ha sido muy protectora con nosotros y sobre todo con Han. Sin embargo, toda esta situación tiene algo triste a mi hermano.", 
                "Trate de hacerle un buen desayuno que le levante el ánimo¬: huevos estrellados con yemas tiernas y un plato de avena con frutas, no está ni cerca de ser tan buenos como los panqueques que mamá suele hacerle, pero es mi mejor intento. Según come el desayuno, levanta la cabeza de a poco hasta que comienza a soltarse en la típica conversión matutina", 
                " —¿A qué hora se fue mami? —pregunto con curiosidad.",
                "—Temprano, hace una hora o más quizás",
                "—Mmmmm—murmuró para sí mientras dirigía una triste mirada hacia la ventana de la cocina.", 
                " —¿A qué estás emocionado por el nuevo año de escuela? —dije, intentando animarlo.",
                "A partir de ahí, la conversación se fluyó en las nuevas asignaciones de Han; el nuevo salón que tiene su grado, qué según cuenta, tiene un computador bastante moderno; hasta los nuevos amigos que piensa hacer, hasta que finalmente terminó por acabar arrebatadamente al sonar la alarma del reloj desde la cocina.",
                "—¡Maldición, las seis de la mañana! —exclamé en voz alta, sin advertir en la sensibilidad de un niño ante tal vocablo. —¡Rápido, cámbiate, toma tus mochila y abrigo! — Con mi hermano detrás de mí todo el tiempo, llevé a la cocina lo más rápido posible los platos del desayuno, tomé mi abrigo y mochila de mi cuarto y finalmente la bufanda y llaves que estaban sobre el recibidor. Azoté con las fuerzas que me provocaron las prisas la puerta de la entrada y nos aventuramos a la escuela lo más deprisa posible.",
                "…",
                "Arrastras, mi hermano me siguió el paso entre la nieve que cubren las aceras principales hasta que sus pequeñas piernas no pudieron más. A falta de 3 kilómetros de camino y con menos de 20 minutos para llegar, lo levanté y coloqué sobre mis hombros para llevarlo en lo que sería una de las carreras más exhaustivas que recuerdo. Con -1°C, registrado por el termómetro del centro de la ciudad, iba corriendo acera tras acera procurando no caerme ni perder el aliento mientras mi cuerpo quedaba indeciso entre sudar a chorros o temblar cual perro chihuahua. Llegué a la entrada, cuando justo dieron las 7, mi salón estaba prácticamente en la entrada, pero el de Han estaba en el otro lado del complejo, en el edificio nuevo; tuve que acompañarlo hasta ahí.",
                "Cuando finalmente pude llegar a mi salón, la puerta estaba cerrada. De acuerdo al reglamento estudiantil, juramentado hace 50 años—mucho antes que algún alumno actual pudiese participar, por supuesto—, \“una vez las puertas del aula se cierran, no será posible permitir la entrada de aquel estudiante que llegue tarde\”; finalmente, mis esfuerzos por llegar a tiempo me dejaron afuera por toda la primera hora. Pasada la primera hora, el profesor Schutmaat sale del salón, me ve de pies a cabeza sentado a un lado de la puerta",
                "—¿Qué son estas horas de llegar? Más le vale ponerse al día que la clase de hoy es fundamental para lo que resta del curso.",
                "Asiento sin más a su actitud pedante que le destaca y me cuelo por la puerta para acodarme en el único asiento disponible. Camino a la parte de atrás, saludo a Patrick, quien se sentó en la segunda fila. Me acomodó lo más rápido posible, intentado que el próximo maestro en entrar no note mi ausencia en la clase anterior. Inmediatamente después, entra un calvo que nunca había visto antes, con una biblia bajo el brazo; aprovecho la naturaleza de la clase y me duermo hasta el final del periodo.",
                "...",
                "El tiempo del almuerzo dura 30 minutos, tiempo que solía emplear en conversar con Patrick. los Patrick ha sido mi mejor amigo desde que entré a secundaria, y usualmente pasamos la mayor parte del tiempo juntos; él pasó todas las vacaciones en mi casa jugando a Kroll; y de vez en cuando iba a su casa a hacer lo mismo; pero sobretodo solemos pasar el rato durante los recesos de la escuela. Para su bien, y un poco para mi mal, se hizo novio de Maggie y lleva un par de semanas que dejamos de juntarnos como antes. No tengo ningún problema con Maggie o la relación entre ellos, pero en momentos como este, desearía que no estuvieran juntos. Mientras pienso donde me puedo sentar en la cafetería, tomo mi lugar en la fila de caja para pedir algún sándwich que me quite el hambre hasta el siguiente receso, cuando tres personas delante de mi lugar le veo.",
                "Cabello ondulado y de un profundo color negro, alcanzo a ver parte de sus facciones cuando gira su cabeza para hablar con una amiga en la otra fila: es preciosa; con tez de muñeca de porcelana y ojos finos, que combinan justo y perfecto con unos labios delicados que dirán saber qué a la afortunada chica en la fila de a la par. Seguramente era nueva, nunca le había visto por la escuela o por el pueblo, pero hasta donde sé ninguna familia nueva se había movido al pueblo recientemente. Fuese cualquiera el caso, lo cierto es que estaba ahí, y ante la ausencia de un amigo con quien amenizar esta refacción, resolví en la osadía de acercarme a ella y ofrecerle mi compañía.",
                "¿O no?"

                
                ],
                opciones: [  
                    {
                        "name": "Hablarle a la chica de la cafeteria",
                        "codigo_capitulo": "ii"    
                    },
                    {
                        "name": "No hablarle a la chica de la cafeteria",
                        "codigo_capitulo": "id"    

                    } 
                ]

            },
            d:{
                numero_de_cap: "2", 
                titulo:"Un camino helado a la escuela",
                progreso:"67%",
                anterior: "root",
                parrafos:[
                    "¿Qué más da si se toma un día más en casa? Después de todo han sido días duros para él.",
                    "Mi camino esta mañana sería un tanto diferente al habitual; dado que no puedo dejar a Han solo en casa hasta que vuelva, debo pasar por casa de mi tía Manne a pedirle que venga a verlo en la mañana. Mi pequeño desvío me haría demorar aún más llegar a la escuela así que debía salir lo más pronto posible. Tomé rápidamente mi mochila, empacando en ella una manzana y un cuaderno de líneas, tomé el abrigo y llaves que estaban sobre el recibidor y me retiré de casa cerrando la puerta con la mayor delicadeza posible para no despertar a mi hermano.",
                    "La propiedad que había dejado Mark a mi tía era muy grande y bastante lujosa, pero era también la cabaña más alejada de la ciudad. Para ser específicos, quedaba al norte del centro del pueblo, sobre una colina lo suficientemente alta para ver el pueblo siempre y que la neblina lo permitiese. Mi casa, por otro lado, quedaba en el barrio sur, así que podrán imaginar el largo recorrido hasta su casa.",
                    "Saliendo del centro, noté como la niebla se hacía poco a poco más densa y el clima iba cambiando según salían unos tímidos rayos del sol. El panorama poco a poco se fue transformando en un bosque denso lleno de pinos pintados con nieve y algunos ciervos temerosos que se alejan según notan mi presencia. He de confesar que disfruto de lugares como estos, la sensación de paz que genera estar rodeado únicamente de árboles es algo que me cuesta describir, aunque finalmente lo homogéneo del lugar también lo convierte en un lugar confuso por el cual moverse.",
                    "—CLACK— sin previo aviso, cae detrás de mía una rama lo suficientemente pesada para dejarme inconsciente, rozando mi abrigo y erizándome la piel. Inmediatamente después, me giro para verificar lo sucedido con la rama. Un cadáver.",
                    "Caí de espaldas sobre la nieve y contemplé unos instantes más el cadáver frente a mí: tenía un rostro pálido y helado por el clima, aún tenía puesto delgado abrigo verde; jamás le había visto. Me levanté deprisa y corrí en la primera dirección frente a mí. No estaba tan cerca del pueblo para llegar a la comisaría, pero seguro que la cabaña de mi tía Manne estaba muy cerca. De repente, la niebla se densifico aún más, para finalmente dejarme sin visión y completamente perdido en el bosque. Dejé de correr después de darme cuenta que no iba a ningún lado, y únicamente permanecí caminando en una misma dirección; Lo que una vez me pareció un lugar hermoso donde encontraba paz, me pareció un manicomio sin entrada ni salida.",
                    "Justo cuando iba a darme por vencido y sentarme a descansar, alcancé a ver a lo lejos la luz borrosa de un farol que señala la presencia de una cabaña que nunca antes había visto. El hogar solitario no tenía ninguna otra señal de vida dentro, pero en la zona parecía el único lugar en el cual pedir ayuda."
                ],
                opciones: [  
                    {
                        name: "Entrar a la cabaña y preguntar por direcciones",
                        codigo_capitulo: "di"    
                    },
                    {
                        name: "",
                        codigo_capitulo: "dd"    

                    } 
                ]

            },
            ii:{
                numero_de_cap: "3", 
                titulo:"Secretos bajo la cama",
                progreso:"100%",
                anterior: "i",
                parrafos:[
                "Final conseguido: Secretos bajo la cama I",
                "Puntuación 4/5"
                ],
            },
            id:{
                numero_de_cap: "3", 
                titulo:"Primera plana",
                progreso:"100%",
                anterior: "i",
                parrafos:[
                "Final conseguido: Primera plana II",
                "Puntuación 2/5"
                ],
            },
            di:{
                numero_de_cap: "3", 
                titulo:"Demonio Azul",
                progreso:"100%",
                anterior: "d",
                parrafos:[
                "Final conseguido: Demonio Azul III",
                "Puntuación 5/5"
                ],
            },
            dd:{
                numero_de_cap: "3", 
                titulo:"Entierro nevado",
                progreso:"100%",
                anterior: "d",
                parrafos:[
                "Final conseguido: Entierro nevado IV",
                "Puntuación 3/5"
                ],
            }
    
        }
const render_page = (chapter)=>{
    const getChapter = (chapter_code)=>{
        if(chapter_code=="root") return myBookChapters.root
        if(chapter_code=="i") return myBookChapters.i
        if(chapter_code=="d") return myBookChapters.d
        if(chapter_code=="ii") return myBookChapters.ii
        if(chapter_code=="id") return myBookChapters.id
        if(chapter_code=="di") return myBookChapters.di
        if(chapter_code=="dd") return myBookChapters.dd
        return null
    }

    let cap = getChapter(chapter)
    if(cap!=null){
        /* Titulo del capitulo */
        let cap_name_container = document.getElementById("contenedor-titulo-capitulo")
        cap_name_container.innerHTML = ""
        let cap_name = "Capítulo "+cap.numero_de_cap+": "+cap.titulo
        let html_cap_name = document.createElement("p")
        html_cap_name.innerHTML = cap_name
        cap_name_container.appendChild(html_cap_name)
        /* Texto del libro */
        let text_container = document.getElementById("contenedor_texto")
        text_container.innerHTML = "";
        cap.parrafos.forEach(element => {
            let parrafo = document.createElement("p")
            parrafo.innerHTML = element
            text_container.appendChild(parrafo)
        })
        /* Decisiones */
        let container_decision_1 = document.getElementById("decision-1")
        container_decision_1.innerHTML = ""
        let container_decision_2 = document.getElementById("decision-2")
        container_decision_2.innerHTML = ""
        if(cap.opciones){
            let decision_1 = document.createElement("p")
            decision_1.innerHTML = cap.opciones[0].name
            container_decision_1.appendChild(decision_1)
            container_decision_1.addEventListener('click', function (event) {
              render_page(cap.opciones[0].codigo_capitulo)  
              document.body.scrollTop = "0px"

            });
            let decision_2 = document.createElement("p")
            decision_2.innerHTML = cap.opciones[1].name
            container_decision_2.appendChild(decision_2)
            container_decision_2.addEventListener('click', function (event) {
                render_page(cap.opciones[1].codigo_capitulo)  
                document.body.scrollTop = "0px"
                        
            });
        }

        document.getElementById("contenedor-cap-anterior").addEventListener('click', function (event) {
            render_page(cap.anterior)  
            document.body.scrollTop = "0px"})

    }
}
window.onload  = () =>{
    render_page("root")

}